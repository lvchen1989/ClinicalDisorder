A deep learning framework for clinical disorder recognition
======
ClinicalDisorder is a package for Clinical Disorder Recognition using recurrent neural networks based on package [LibN3L](https://github.com/SUTDNLP/LibN3L). 

System configuration
======
* Download the [LibN3L](https://github.com/SUTDNLP/LibN3L) library and configure your system. Please refer to [Here](https://github.com/SUTDNLP/LibN3L). This is a deep learning toolkit in C++, designed specially for NLP. This package can easily support various user-defined neural network structures.
* Note that we have changed MyLib.h and Metric.h in this package for our task. Please use the package released in our project and follow the instructions on [LibN3L](https://github.com/SUTDNLP/LibN3L) and configure your system.
* Open [/LSTMRNN/CMakeLists.txt](LSTMRNN/CMakeLists.txt) and change " ../LibN3L/" into the directory of your [LibN3L](https://github.com/SUTDNLP/LibN3L) package.

Compile
======
* cmake .
* make LSTMNoCharCRFMMLabeler

***LSTMNoCharCRFMMLabeler*** is the bidirectional LSTM.

Training
=====
This is a training example.

* ./LSTMNoCharCRFMMLabeler -l -train data/trainsample.txt -test data/testsample.txt -option example/option.tune50 -word ../embedding/bio/semeval.50.vec1 -model example/demoLSTMMM50.model

-l: training. 

-train: train set. 

-test: test set. In this training command, it is only used for constructing the word embedding vocabulary. 

-option:  parameter setting file. 

-word: pretrained word embedding. 

-model: the path of saved model file. 



The demo system includes clinical disorder recognition sample data(["trainsample.txt"](LSTMRNN/data/trainsample.txt), and ["testsample.txt"](LSTMRNN/data/testsample.txt)), English word embeding sample file(["sena.emb"](embeddings/senna/sena.emb)) and parameter setting file(["option.tune"](LSTMRNN/example/optiontune)). All of these files are in the path described in the above trainning command.
 
This demo system runs a ***LSTMNoCharCRFMMLabeler*** model which means a bidirectional LSTM neural network and use CRF maximun margin as the objective function. 

The demo system will generate model file: "demoLSTMMM50.model" at ["example"](LSTMRNN/example).

Test:
=====

This is a test example.

* ./LSTMNoCharCRFMMLabeler -test data/testsample.txt -model example/demoLSTMMM50.model -output data/testLSTMMM50.output

-test: test set.

-model: the model used for testing. "demoLSTMMM50.model" at ["example"](LSTMRNN/example) is our trained model using Bi-LSTM and Clinical embeddings(50 dim.)

-outoput: the predicted result fot the test file (["testsample.txt"](LSTMRNN/data/testsample.txt)) based on the model "demoLSTMMM50.model".

Demo system:
=====
* Run the [neuralLSTMMMNoC-50vec.sh](LSTMRNN/neuralLSTMMMNoC-50vec.sh) file: `sh neuralLSTMMMNoC-50vec.sh`. This is a simple integration of the above process.
* You can run `sh cleanall.sh` to clean the files generated by the source.

Related Data:
=====
* The corpus used for ShARe/CLEF eHealth 2013 challenge consists of annotations over de-identied clinical reports from a US intensive care department (version 2.5 of the MIMIC II database)(http://mimic.physionet.org). You can access the data set following the instruction on the website of the challenge (https://sites.google.com/site/shareclefehealth/data). Although the clinical reports were de-identied, they still needed to be treated with appropriate care and respect. Hence, all users are required to obtain a US human subjects training certicate, create an account to a password-protected site on the Internet, specify the purpose of data usage, accept the data use agreement, and get their account approved.
* The pretrained word embeddings in this page only contain a English word embeding sample file(["sena.emb"](embeddings/senna/sena.emb)). The word embeddings used in our system should follow this format. You can get the full SENNA embedding from (http://ronan.collobert.com/senna/), Google word2vec embedding from (https://code.google.com/p/word2vec/), our clinical-domain word embeddings released in (https://drive.google.com/open?id=0B0DShGFN8prScWRGTENjVnJVclE)
* You can also get the "demoLSTMMM300.model" generated by Bi-LSTM and Clinical embeddings(300 dim.) in (https://drive.google.com/open?id=0B0DShGFN8prSOXhLYlZrUzZlY1E). "demoLSTMMM300.model" and "demoLSTMMM50.model" are the models performing well in this task.

Note: 
======
* We only release LSTM-RNN and bidirectional LSTM-RNN method, which performs well in this taks, in the project. If you need RNN and bidirectional RNN, please contact me.
* You can also directly use our project to train you own models for other NER tasks, such as BioCreative II Gene Mention task. When you get you result file generated by your own model, you should evaluate the result by your own evaluation script, or modify the evaluation method in our source code. 
* The example files are just to verify the running for the code. For copyright consideration, we take only some sentences as example. Hence the results on those example datasets does not represent the real performance on large dataset. The training and test files should follow the format of the example files(["trainsample.txt"](LSTMRNN/data/trainsample.txt), and ["testsample.txt"](LSTMRNN/data/testsample.txt)).
* Current version only compatible with [LibN3L](https://github.com/SUTDNLP/LibN3L) after ***Dec. 10th 2015*** , which contains the model saving and loading module.


Updating...
====

Contact:
=====
lvchen1989@whu.edu.cn
